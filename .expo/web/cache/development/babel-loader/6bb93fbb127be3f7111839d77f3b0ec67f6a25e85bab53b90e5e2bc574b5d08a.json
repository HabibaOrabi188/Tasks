{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useAnimatedRef = useAnimatedRef;\nvar _react = require(\"react\");\nvar _useSharedValue = require(\"./useSharedValue\");\nvar _fabricUtils = require(\"../fabricUtils\");\nvar _shareables = require(\"../shareables\");\nvar _reactNative = require(\"react-native\");\nvar _PlatformChecker = require(\"../PlatformChecker\");\nvar IS_FABRIC = (0, _PlatformChecker.isFabric)();\nfunction getComponentOrScrollable(component) {\n  if (IS_FABRIC && component.getNativeScrollRef) {\n    return component.getNativeScrollRef();\n  } else if (!IS_FABRIC && component.getScrollableNode) {\n    return component.getScrollableNode();\n  }\n  return component;\n}\nvar getTagValueFunction = IS_FABRIC ? _fabricUtils.getShadowNodeWrapperFromRef : _reactNative.findNodeHandle;\nvar _worklet_10709902486534_init_data = {\n  code: \"function anonymous(){const{tag,viewName}=this.__closure;const f=function(){return tag.value;};f.viewName=viewName;return f;}\",\n  location: \"D:\\\\course\\\\ReactNative\\\\Tasks\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\reanimated2\\\\hook\\\\useAnimatedRef.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"tag\\\",\\\"viewName\\\",\\\"__closure\\\",\\\"f\\\",\\\"value\\\"],\\\"sources\\\":[\\\"D:/course/ReactNative/Tasks/node_modules/react-native-reanimated/lib/module/reanimated2/hook/useAnimatedRef.js\\\"],\\\"mappings\\\":\\\"AA6Cc,SAAAA,SAAMA,CAAA,QAAAC,GAAA,CAAAC,QAAA,OAAAC,SAAA,CAGZ,KAAM,CAAAC,CAAC,CAAG,QAAAA,CAAA,QAAM,CAAAH,GAAG,CAACI,KAAK,GACzBD,CAAC,CAACF,QAAQ,CAAGA,QAAQ,CACrB,MAAO,CAAAE,CAAC,CACV\\\"}\",\n  version: \"3.6.1\"\n};\nfunction useAnimatedRef() {\n  var tag = (0, _useSharedValue.useSharedValue)(-1);\n  var viewName = (0, _useSharedValue.useSharedValue)(null);\n  var ref = (0, _react.useRef)();\n  if (!ref.current) {\n    var fun = function fun(component) {\n      if (component) {\n        tag.value = getTagValueFunction(getComponentOrScrollable(component));\n        fun.current = component;\n        if (_reactNative.Platform.OS === 'ios' && !IS_FABRIC) {\n          var _viewConfig;\n          viewName.value = (component === null || component === void 0 ? void 0 : (_viewConfig = component.viewConfig) === null || _viewConfig === void 0 ? void 0 : _viewConfig.uiViewClassName) || 'RCTView';\n        }\n      }\n      return tag.value;\n    };\n    fun.current = null;\n    var remoteRef = (0, _shareables.makeShareableCloneRecursive)({\n      __init: function () {\n        var _e = [new global.Error(), -3, -27];\n        var anonymous = function anonymous() {\n          var f = function f() {\n            return tag.value;\n          };\n          f.viewName = viewName;\n          return f;\n        };\n        anonymous.__closure = {\n          tag: tag,\n          viewName: viewName\n        };\n        anonymous.__workletHash = 10709902486534;\n        anonymous.__initData = _worklet_10709902486534_init_data;\n        anonymous.__stackDetails = _e;\n        return anonymous;\n      }()\n    });\n    (0, _shareables.registerShareableMapping)(fun, remoteRef);\n    ref.current = fun;\n  }\n  return ref.current;\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","useAnimatedRef","_react","require","_useSharedValue","_fabricUtils","_shareables","_reactNative","_PlatformChecker","IS_FABRIC","isFabric","getComponentOrScrollable","component","getNativeScrollRef","getScrollableNode","getTagValueFunction","getShadowNodeWrapperFromRef","findNodeHandle","_worklet_10709902486534_init_data","code","location","sourceMap","version","tag","useSharedValue","viewName","ref","useRef","current","fun","Platform","OS","_viewConfig","viewConfig","uiViewClassName","remoteRef","makeShareableCloneRecursive","__init","_e","global","Error","anonymous","f","__closure","__workletHash","__initData","__stackDetails","registerShareableMapping"],"sources":["D:\\course\\ReactNative\\Tasks\\node_modules\\react-native-reanimated\\lib\\module\\reanimated2\\hook\\useAnimatedRef.ts"],"sourcesContent":["'use strict';\nimport type { Component } from 'react';\nimport { useRef } from 'react';\nimport { useSharedValue } from './useSharedValue';\nimport type { AnimatedRef } from './commonTypes';\nimport type { ShadowNodeWrapper } from '../commonTypes';\nimport { getShadowNodeWrapperFromRef } from '../fabricUtils';\nimport {\n  makeShareableCloneRecursive,\n  registerShareableMapping,\n} from '../shareables';\nimport { Platform, findNodeHandle } from 'react-native';\nimport { isFabric } from '../PlatformChecker';\n\nconst IS_FABRIC = isFabric();\n\ninterface MaybeScrollableComponent extends Component {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  getNativeScrollRef?: any;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  getScrollableNode?: any;\n  viewConfig?: {\n    uiViewClassName?: string;\n  };\n}\n\nfunction getComponentOrScrollable(component: MaybeScrollableComponent) {\n  if (IS_FABRIC && component.getNativeScrollRef) {\n    return component.getNativeScrollRef();\n  } else if (!IS_FABRIC && component.getScrollableNode) {\n    return component.getScrollableNode();\n  }\n  return component;\n}\n\nconst getTagValueFunction = IS_FABRIC\n  ? getShadowNodeWrapperFromRef\n  : findNodeHandle;\n\n/**\n * Lets you get a reference of a view that you can use inside a worklet.\n *\n * @returns An object with a `.current` property which contains an instance of a component.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/core/useAnimatedRef\n */\nexport function useAnimatedRef<\n  TComponent extends Component\n>(): AnimatedRef<TComponent> {\n  const tag = useSharedValue<number | ShadowNodeWrapper | null>(-1);\n  const viewName = useSharedValue<string | null>(null);\n\n  const ref = useRef<AnimatedRef<TComponent>>();\n\n  if (!ref.current) {\n    const fun: AnimatedRef<TComponent> = <AnimatedRef<TComponent>>((\n      component\n    ) => {\n      // enters when ref is set by attaching to a component\n      if (component) {\n        tag.value = getTagValueFunction(getComponentOrScrollable(component));\n        fun.current = component;\n        // viewName is required only on iOS with Paper\n        if (Platform.OS === 'ios' && !IS_FABRIC) {\n          viewName.value =\n            (component as MaybeScrollableComponent)?.viewConfig\n              ?.uiViewClassName || 'RCTView';\n        }\n      }\n      return tag.value;\n    });\n\n    fun.current = null;\n\n    const remoteRef = makeShareableCloneRecursive({\n      __init: () => {\n        'worklet';\n        const f = () => tag.value;\n        f.viewName = viewName;\n        return f;\n      },\n    });\n    registerShareableMapping(fun, remoteRef);\n    ref.current = fun;\n  }\n\n  return ref.current;\n}\n"],"mappings":"AAAA,YAAY;;AAAAA,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,KAAA;AAAA;AAAAD,OAAA,CAAAE,cAAA,GAAAA,cAAA;AAEZ,IAAAC,MAAA,GAAAC,OAAA;AACA,IAAAC,eAAA,GAAAD,OAAA;AAGA,IAAAE,YAAA,GAAAF,OAAA;AACA,IAAAG,WAAA,GAAAH,OAAA;AAIA,IAAAI,YAAA,GAAAJ,OAAA;AACA,IAAAK,gBAAA,GAAAL,OAAA;AAEA,IAAMM,SAAS,GAAG,IAAAC,yBAAQ,GAAE;AAY5B,SAASC,wBAAwBA,CAACC,SAAmC,EAAE;EACrE,IAAIH,SAAS,IAAIG,SAAS,CAACC,kBAAkB,EAAE;IAC7C,OAAOD,SAAS,CAACC,kBAAkB,EAAE;EACvC,CAAC,MAAM,IAAI,CAACJ,SAAS,IAAIG,SAAS,CAACE,iBAAiB,EAAE;IACpD,OAAOF,SAAS,CAACE,iBAAiB,EAAE;EACtC;EACA,OAAOF,SAAS;AAClB;AAEA,IAAMG,mBAAmB,GAAGN,SAAS,GACjCO,wCAA2B,GAC3BC,2BAAc;AAAA,IAAAC,iCAAA;EAAAC,IAAA;EAAAC,QAAA;EAAAC,SAAA;EAAAC,OAAA;AAAA;AAQX,SAASrB,cAAcA,CAAA,EAED;EAC3B,IAAMsB,GAAG,GAAG,IAAAC,8BAAc,EAAoC,CAAC,CAAC,CAAC;EACjE,IAAMC,QAAQ,GAAG,IAAAD,8BAAc,EAAgB,IAAI,CAAC;EAEpD,IAAME,GAAG,GAAG,IAAAC,aAAM,GAA2B;EAE7C,IAAI,CAACD,GAAG,CAACE,OAAO,EAAE;IAChB,IAAMC,GAA4B,GAChC,SADIA,GAA4BA,CAChCjB,SAAS,EACN;MAEH,IAAIA,SAAS,EAAE;QACbW,GAAG,CAACvB,KAAK,GAAGe,mBAAmB,CAACJ,wBAAwB,CAACC,SAAS,CAAC,CAAC;QACpEiB,GAAG,CAACD,OAAO,GAAGhB,SAAS;QAEvB,IAAIkB,qBAAQ,CAACC,EAAE,KAAK,KAAK,IAAI,CAACtB,SAAS,EAAE;UAAA,IAAAuB,WAAA;UACvCP,QAAQ,CAACzB,KAAK,GACZ,CAACY,SAAS,aAATA,SAAS,wBAAAoB,WAAA,GAATpB,SAAS,CAA+BqB,UAAU,cAAAD,WAAA,uBAAnDA,WAAA,CACIE,eAAe,KAAI,SAAS;QACpC;MACF;MACA,OAAOX,GAAG,CAACvB,KAAK;IAClB,CAAE;IAEF6B,GAAG,CAACD,OAAO,GAAG,IAAI;IAElB,IAAMO,SAAS,GAAG,IAAAC,uCAA2B,EAAC;MAC5CC,MAAM,EAAE;QAAA,IAAAC,EAAA,QAAAC,MAAA,CAAAC,KAAA;QAAA,IAAAC,SAAA,YAAAA,UAAA,EAAM;UAEZ,IAAMC,CAAC,GAAG,SAAJA,CAACA,CAAA;YAAA,OAASnB,GAAG,CAACvB,KAAK;UAAA;UACzB0C,CAAC,CAACjB,QAAQ,GAAGA,QAAQ;UACrB,OAAOiB,CAAC;QACV;QAAAD,SAAA,CAAAE,SAAA;UAAApB,GAAA,EAHkBA,GAAG;UAAAE,QAAA,EACNA;QAAQ;QAAAgB,SAAA,CAAAG,aAAA;QAAAH,SAAA,CAAAI,UAAA,GAAA3B,iCAAA;QAAAuB,SAAA,CAAAK,cAAA,GAAAR,EAAA;QAAA,OAAAG,SAAA;MAAA,CAHf;IAMV,CAAC,CAAC;IACF,IAAAM,oCAAwB,EAAClB,GAAG,EAAEM,SAAS,CAAC;IACxCT,GAAG,CAACE,OAAO,GAAGC,GAAG;EACnB;EAEA,OAAOH,GAAG,CAACE,OAAO;AACpB"},"metadata":{},"sourceType":"script","externalDependencies":[]}