{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.extractTransformFromStyle = extractTransformFromStyle;\nexports.getProcessedConfig = getProcessedConfig;\nexports.getReducedMotionFromConfig = getReducedMotionFromConfig;\nexports.handleExitingAnimation = handleExitingAnimation;\nexports.handleLayoutTransition = handleLayoutTransition;\nexports.makeElementVisible = makeElementVisible;\nexports.setElementAnimation = setElementAnimation;\nvar _config = require(\"./config\");\nvar _animationParser = require(\"./animationParser\");\nvar _createAnimation = require(\"./createAnimation\");\nvar _domUtils = require(\"./domUtils\");\nvar _jsReanimated = require(\"../../js-reanimated\");\nvar _commonTypes = require(\"../../commonTypes\");\nvar _useReducedMotion = require(\"../../hook/useReducedMotion\");\nvar _commonTypes2 = require(\"../animationBuilder/commonTypes\");\nfunction getEasingFromConfig(config) {\n  var easingName = config.easingV !== undefined && config.easingV.name in _config.WebEasings ? config.easingV.name : 'linear';\n  return `cubic-bezier(${_config.WebEasings[easingName].toString()})`;\n}\nfunction getRandomDelay() {\n  var maxDelay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1000;\n  return Math.floor(Math.random() * (maxDelay + 1)) / 1000;\n}\nfunction getDelayFromConfig(config) {\n  var shouldRandomizeDelay = config.randomizeDelay;\n  var delay = shouldRandomizeDelay ? getRandomDelay() : 0;\n  if (!config.delayV) {\n    return delay;\n  }\n  return shouldRandomizeDelay ? getRandomDelay(config.delayV) : config.delayV / 1000;\n}\nfunction getReducedMotionFromConfig(config) {\n  if (!config.reduceMotionV) {\n    return (0, _useReducedMotion.useReducedMotion)();\n  }\n  switch (config.reduceMotionV) {\n    case _commonTypes.ReduceMotion.Never:\n      return false;\n    case _commonTypes.ReduceMotion.Always:\n      return true;\n    default:\n      return (0, _useReducedMotion.useReducedMotion)();\n  }\n}\nfunction getDurationFromConfig(config, isLayoutTransition, animationName) {\n  var defaultDuration = isLayoutTransition ? 0.3 : _config.Animations[animationName].duration;\n  return config.durationV !== undefined ? config.durationV / 1000 : defaultDuration;\n}\nfunction getCallbackFromConfig(config) {\n  return config.callbackV !== undefined ? config.callbackV : null;\n}\nfunction getReversedFromConfig(config) {\n  return !!config.reversed;\n}\nfunction extractTransformFromStyle(style) {\n  if (!style) {\n    return;\n  }\n  if (typeof style.transform === 'string') {\n    throw new Error('[Reanimated] String transform is currently unsupported.');\n  }\n  if (!Array.isArray(style)) {\n    return style.transform;\n  }\n  for (var i = style.length - 1; i >= 0; --i) {\n    if (style[i].transform) {\n      return style[i].transform;\n    }\n  }\n}\nfunction getProcessedConfig(animationName, animationType, config, initialAnimationName) {\n  return {\n    animationName: animationName,\n    animationType: animationType,\n    duration: getDurationFromConfig(config, animationType === _commonTypes2.LayoutAnimationType.LAYOUT, initialAnimationName),\n    delay: getDelayFromConfig(config),\n    easing: getEasingFromConfig(config),\n    callback: getCallbackFromConfig(config),\n    reversed: getReversedFromConfig(config)\n  };\n}\nfunction makeElementVisible(element, delay) {\n  if (delay === 0) {\n    (0, _jsReanimated._updatePropsJS)({\n      visibility: 'initial'\n    }, {\n      _component: element\n    });\n  } else {\n    setTimeout(function () {\n      (0, _jsReanimated._updatePropsJS)({\n        visibility: 'initial'\n      }, {\n        _component: element\n      });\n    }, delay * 1000);\n  }\n}\nfunction setElementAnimation(element, animationConfig, existingTransform) {\n  var animationName = animationConfig.animationName,\n    duration = animationConfig.duration,\n    delay = animationConfig.delay,\n    easing = animationConfig.easing;\n  element.style.animationName = animationName;\n  element.style.animationDuration = `${duration}s`;\n  element.style.animationDelay = `${delay}s`;\n  element.style.animationTimingFunction = easing;\n  element.onanimationend = function () {\n    var _animationConfig$call;\n    (_animationConfig$call = animationConfig.callback) === null || _animationConfig$call === void 0 ? void 0 : _animationConfig$call.call(animationConfig, true);\n    element.removeEventListener('animationcancel', animationCancelHandler);\n  };\n  var animationCancelHandler = function animationCancelHandler() {\n    var _animationConfig$call2;\n    (_animationConfig$call2 = animationConfig.callback) === null || _animationConfig$call2 === void 0 ? void 0 : _animationConfig$call2.call(animationConfig, false);\n    element.removeEventListener('animationcancel', animationCancelHandler);\n  };\n  element.onanimationstart = function () {\n    if (animationConfig.animationType === _commonTypes2.LayoutAnimationType.ENTERING) {\n      (0, _jsReanimated._updatePropsJS)({\n        visibility: 'initial'\n      }, {\n        _component: element\n      });\n    }\n    element.addEventListener('animationcancel', animationCancelHandler);\n    element.style.transform = (0, _animationParser.convertTransformToString)(existingTransform);\n  };\n  (0, _domUtils.scheduleAnimationCleanup)(animationName, duration + delay);\n}\nfunction handleLayoutTransition(element, animationConfig, transitionData, existingTransform) {\n  var animationName = animationConfig.animationName;\n  var animationType;\n  switch (animationName) {\n    case 'LinearTransition':\n      animationType = _config.TransitionType.LINEAR;\n      break;\n    case 'SequencedTransition':\n      animationType = _config.TransitionType.SEQUENCED;\n      break;\n    case 'FadingTransition':\n      animationType = _config.TransitionType.FADING;\n      break;\n    default:\n      animationType = _config.TransitionType.LINEAR;\n      break;\n  }\n  animationConfig.animationName = (0, _createAnimation.TransitionGenerator)(animationType, transitionData, existingTransform);\n  var transformCopy = existingTransform ? structuredClone(existingTransform) : [];\n  transformCopy.push(transitionData);\n  element.style.transform = (0, _animationParser.convertTransformToString)(transformCopy);\n  setElementAnimation(element, animationConfig, existingTransform);\n}\nfunction handleExitingAnimation(element, animationConfig) {\n  var parent = element.offsetParent;\n  var dummy = element.cloneNode();\n  element.style.animationName = '';\n  element.style.visibility = 'hidden';\n  while (element.firstChild) {\n    dummy.appendChild(element.firstChild);\n  }\n  setElementAnimation(dummy, animationConfig);\n  parent === null || parent === void 0 ? void 0 : parent.appendChild(dummy);\n  dummy.style.position = 'absolute';\n  dummy.style.top = `${element.offsetTop}px`;\n  dummy.style.left = `${element.offsetLeft}px`;\n  dummy.style.margin = '0px';\n  var originalOnAnimationEnd = dummy.onanimationend;\n  dummy.onanimationend = function (event) {\n    if (parent !== null && parent !== void 0 && parent.contains(dummy)) {\n      parent.removeChild(dummy);\n    }\n    originalOnAnimationEnd === null || originalOnAnimationEnd === void 0 ? void 0 : originalOnAnimationEnd.call(this, event);\n  };\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","extractTransformFromStyle","getProcessedConfig","getReducedMotionFromConfig","handleExitingAnimation","handleLayoutTransition","makeElementVisible","setElementAnimation","_config","require","_animationParser","_createAnimation","_domUtils","_jsReanimated","_commonTypes","_useReducedMotion","_commonTypes2","getEasingFromConfig","config","easingName","easingV","undefined","name","WebEasings","toString","getRandomDelay","maxDelay","arguments","length","Math","floor","random","getDelayFromConfig","shouldRandomizeDelay","randomizeDelay","delay","delayV","reduceMotionV","useReducedMotion","ReduceMotion","Never","Always","getDurationFromConfig","isLayoutTransition","animationName","defaultDuration","Animations","duration","durationV","getCallbackFromConfig","callbackV","getReversedFromConfig","reversed","style","transform","Error","Array","isArray","i","animationType","initialAnimationName","LayoutAnimationType","LAYOUT","easing","callback","element","_updatePropsJS","visibility","_component","setTimeout","animationConfig","existingTransform","animationDuration","animationDelay","animationTimingFunction","onanimationend","_animationConfig$call","call","removeEventListener","animationCancelHandler","_animationConfig$call2","onanimationstart","ENTERING","addEventListener","convertTransformToString","scheduleAnimationCleanup","transitionData","TransitionType","LINEAR","SEQUENCED","FADING","TransitionGenerator","transformCopy","structuredClone","push","parent","offsetParent","dummy","cloneNode","firstChild","appendChild","position","top","offsetTop","left","offsetLeft","margin","originalOnAnimationEnd","event","contains","removeChild"],"sources":["D:\\course\\ReactNative\\Tasks\\node_modules\\react-native-reanimated\\lib\\module\\reanimated2\\layoutReanimation\\web\\componentUtils.ts"],"sourcesContent":["'use strict';\n\nimport type { TransformsStyle } from 'react-native';\nimport { Animations, TransitionType, WebEasings } from './config';\nimport type {\n  AnimationCallback,\n  AnimationConfig,\n  AnimationNames,\n  CustomConfig,\n  WebEasingsNames,\n} from './config';\nimport { convertTransformToString } from './animationParser';\nimport type { TransitionData } from './animationParser';\nimport { TransitionGenerator } from './createAnimation';\nimport { scheduleAnimationCleanup } from './domUtils';\nimport { _updatePropsJS } from '../../js-reanimated';\nimport type { ReanimatedHTMLElement } from '../../js-reanimated';\nimport { ReduceMotion } from '../../commonTypes';\nimport type { StyleProps } from '../../commonTypes';\nimport { useReducedMotion } from '../../hook/useReducedMotion';\nimport { LayoutAnimationType } from '../animationBuilder/commonTypes';\n\nfunction getEasingFromConfig(config: CustomConfig): string {\n  const easingName = (\n    config.easingV !== undefined &&\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    config.easingV!.name in WebEasings\n      ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        config.easingV!.name\n      : 'linear'\n  ) as WebEasingsNames;\n\n  return `cubic-bezier(${WebEasings[easingName].toString()})`;\n}\n\nfunction getRandomDelay(maxDelay = 1000) {\n  return Math.floor(Math.random() * (maxDelay + 1)) / 1000;\n}\n\nfunction getDelayFromConfig(config: CustomConfig): number {\n  const shouldRandomizeDelay = config.randomizeDelay;\n\n  const delay = shouldRandomizeDelay ? getRandomDelay() : 0;\n\n  if (!config.delayV) {\n    return delay;\n  }\n\n  return shouldRandomizeDelay\n    ? getRandomDelay(config.delayV)\n    : // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      config.delayV! / 1000;\n}\n\nexport function getReducedMotionFromConfig(config: CustomConfig) {\n  if (!config.reduceMotionV) {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    return useReducedMotion();\n  }\n\n  switch (config.reduceMotionV) {\n    case ReduceMotion.Never:\n      return false;\n    case ReduceMotion.Always:\n      return true;\n    default:\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      return useReducedMotion();\n  }\n}\n\nfunction getDurationFromConfig(\n  config: CustomConfig,\n  isLayoutTransition: boolean,\n  animationName: AnimationNames\n): number {\n  const defaultDuration = isLayoutTransition\n    ? 0.3\n    : Animations[animationName].duration;\n\n  return config.durationV !== undefined\n    ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      config.durationV! / 1000\n    : defaultDuration;\n}\n\nfunction getCallbackFromConfig(config: CustomConfig): AnimationCallback {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  return config.callbackV !== undefined ? config.callbackV! : null;\n}\n\nfunction getReversedFromConfig(config: CustomConfig) {\n  return !!config.reversed;\n}\n\nexport function extractTransformFromStyle(style: StyleProps) {\n  if (!style) {\n    return;\n  }\n\n  if (typeof style.transform === 'string') {\n    throw new Error('[Reanimated] String transform is currently unsupported.');\n  }\n\n  if (!Array.isArray(style)) {\n    return style.transform;\n  }\n\n  // Only last transform should be considered\n  for (let i = style.length - 1; i >= 0; --i) {\n    if (style[i].transform) {\n      return style[i].transform;\n    }\n  }\n}\n\nexport function getProcessedConfig(\n  animationName: string,\n  animationType: LayoutAnimationType,\n  config: CustomConfig,\n  initialAnimationName: AnimationNames\n): AnimationConfig {\n  return {\n    animationName: animationName,\n    animationType: animationType,\n    duration: getDurationFromConfig(\n      config,\n      animationType === LayoutAnimationType.LAYOUT,\n      initialAnimationName\n    ),\n    delay: getDelayFromConfig(config),\n    easing: getEasingFromConfig(config),\n    callback: getCallbackFromConfig(config),\n    reversed: getReversedFromConfig(config),\n  };\n}\n\nexport function makeElementVisible(element: HTMLElement, delay: number) {\n  if (delay === 0) {\n    _updatePropsJS(\n      { visibility: 'initial' },\n      { _component: element as ReanimatedHTMLElement }\n    );\n  } else {\n    setTimeout(() => {\n      _updatePropsJS(\n        { visibility: 'initial' },\n        { _component: element as ReanimatedHTMLElement }\n      );\n    }, delay * 1000);\n  }\n}\n\nexport function setElementAnimation(\n  element: HTMLElement,\n  animationConfig: AnimationConfig,\n  existingTransform?: TransformsStyle['transform']\n) {\n  const { animationName, duration, delay, easing } = animationConfig;\n\n  element.style.animationName = animationName;\n  element.style.animationDuration = `${duration}s`;\n  element.style.animationDelay = `${delay}s`;\n  element.style.animationTimingFunction = easing;\n\n  element.onanimationend = () => {\n    animationConfig.callback?.(true);\n    element.removeEventListener('animationcancel', animationCancelHandler);\n  };\n\n  const animationCancelHandler = () => {\n    animationConfig.callback?.(false);\n    element.removeEventListener('animationcancel', animationCancelHandler);\n  };\n\n  // Here we have to use `addEventListener` since element.onanimationcancel doesn't work on chrome\n  element.onanimationstart = () => {\n    if (animationConfig.animationType === LayoutAnimationType.ENTERING) {\n      _updatePropsJS(\n        { visibility: 'initial' },\n        { _component: element as ReanimatedHTMLElement }\n      );\n    }\n\n    element.addEventListener('animationcancel', animationCancelHandler);\n    element.style.transform = convertTransformToString(existingTransform);\n  };\n\n  scheduleAnimationCleanup(animationName, duration + delay);\n}\n\nexport function handleLayoutTransition(\n  element: HTMLElement,\n  animationConfig: AnimationConfig,\n  transitionData: TransitionData,\n  existingTransform: TransformsStyle['transform'] | undefined\n) {\n  const { animationName } = animationConfig;\n\n  let animationType;\n\n  switch (animationName) {\n    case 'LinearTransition':\n      animationType = TransitionType.LINEAR;\n      break;\n    case 'SequencedTransition':\n      animationType = TransitionType.SEQUENCED;\n      break;\n    case 'FadingTransition':\n      animationType = TransitionType.FADING;\n      break;\n    default:\n      animationType = TransitionType.LINEAR;\n      break;\n  }\n\n  animationConfig.animationName = TransitionGenerator(\n    animationType,\n    transitionData,\n    existingTransform\n  );\n\n  const transformCopy = existingTransform\n    ? structuredClone(existingTransform)\n    : [];\n\n  // @ts-ignore `existingTransform` cannot be string because in that case\n  // we throw error in `extractTransformFromStyle`\n  transformCopy.push(transitionData);\n  element.style.transform = convertTransformToString(transformCopy);\n\n  setElementAnimation(element, animationConfig, existingTransform);\n}\n\nexport function handleExitingAnimation(\n  element: HTMLElement,\n  animationConfig: AnimationConfig\n) {\n  const parent = element.offsetParent;\n  const dummy = element.cloneNode() as HTMLElement;\n\n  element.style.animationName = '';\n  element.style.visibility = 'hidden';\n\n  // After cloning the element, we want to move all children from original element to its clone. This is because original element\n  // will be unmounted, therefore when this code executes in child component, parent will be either empty or removed soon.\n  // Using element.cloneNode(true) doesn't solve the problem, because it creates copy of children and we won't be able to set their animations\n  //\n  // This loop works because appendChild() moves element into its new parent instead of copying it\n  while (element.firstChild) {\n    dummy.appendChild(element.firstChild);\n  }\n\n  setElementAnimation(dummy, animationConfig);\n  parent?.appendChild(dummy);\n\n  // We hide current element so only its copy with proper animation will be displayed\n\n  dummy.style.position = 'absolute';\n  dummy.style.top = `${element.offsetTop}px`;\n  dummy.style.left = `${element.offsetLeft}px`;\n  dummy.style.margin = '0px'; // tmpElement has absolute position, so margin is not necessary\n\n  const originalOnAnimationEnd = dummy.onanimationend;\n\n  dummy.onanimationend = function (event: AnimationEvent) {\n    if (parent?.contains(dummy)) {\n      parent.removeChild(dummy);\n    }\n\n    // Given that this function overrides onAnimationEnd, it won't be null\n    originalOnAnimationEnd?.call(this, event);\n  };\n}\n"],"mappings":"AAAA,YAAY;;AAAAA,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,KAAA;AAAA;AAAAD,OAAA,CAAAE,yBAAA,GAAAA,yBAAA;AAAAF,OAAA,CAAAG,kBAAA,GAAAA,kBAAA;AAAAH,OAAA,CAAAI,0BAAA,GAAAA,0BAAA;AAAAJ,OAAA,CAAAK,sBAAA,GAAAA,sBAAA;AAAAL,OAAA,CAAAM,sBAAA,GAAAA,sBAAA;AAAAN,OAAA,CAAAO,kBAAA,GAAAA,kBAAA;AAAAP,OAAA,CAAAQ,mBAAA,GAAAA,mBAAA;AAGZ,IAAAC,OAAA,GAAAC,OAAA;AAQA,IAAAC,gBAAA,GAAAD,OAAA;AAEA,IAAAE,gBAAA,GAAAF,OAAA;AACA,IAAAG,SAAA,GAAAH,OAAA;AACA,IAAAI,aAAA,GAAAJ,OAAA;AAEA,IAAAK,YAAA,GAAAL,OAAA;AAEA,IAAAM,iBAAA,GAAAN,OAAA;AACA,IAAAO,aAAA,GAAAP,OAAA;AAEA,SAASQ,mBAAmBA,CAACC,MAAoB,EAAU;EACzD,IAAMC,UAAU,GACdD,MAAM,CAACE,OAAO,KAAKC,SAAS,IAE5BH,MAAM,CAACE,OAAO,CAAEE,IAAI,IAAIC,kBAAU,GAE9BL,MAAM,CAACE,OAAO,CAAEE,IAAI,GACpB,QACc;EAEpB,OAAQ,gBAAeC,kBAAU,CAACJ,UAAU,CAAC,CAACK,QAAQ,EAAG,GAAE;AAC7D;AAEA,SAASC,cAAcA,CAAA,EAAkB;EAAA,IAAjBC,QAAQ,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAN,SAAA,GAAAM,SAAA,MAAG,IAAI;EACrC,OAAOE,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,IAAIL,QAAQ,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI;AAC1D;AAEA,SAASM,kBAAkBA,CAACd,MAAoB,EAAU;EACxD,IAAMe,oBAAoB,GAAGf,MAAM,CAACgB,cAAc;EAElD,IAAMC,KAAK,GAAGF,oBAAoB,GAAGR,cAAc,EAAE,GAAG,CAAC;EAEzD,IAAI,CAACP,MAAM,CAACkB,MAAM,EAAE;IAClB,OAAOD,KAAK;EACd;EAEA,OAAOF,oBAAoB,GACvBR,cAAc,CAACP,MAAM,CAACkB,MAAM,CAAC,GAE7BlB,MAAM,CAACkB,MAAM,GAAI,IAAI;AAC3B;AAEO,SAASjC,0BAA0BA,CAACe,MAAoB,EAAE;EAC/D,IAAI,CAACA,MAAM,CAACmB,aAAa,EAAE;IAEzB,OAAO,IAAAC,kCAAgB,GAAE;EAC3B;EAEA,QAAQpB,MAAM,CAACmB,aAAa;IAC1B,KAAKE,yBAAY,CAACC,KAAK;MACrB,OAAO,KAAK;IACd,KAAKD,yBAAY,CAACE,MAAM;MACtB,OAAO,IAAI;IACb;MAEE,OAAO,IAAAH,kCAAgB,GAAE;EAAC;AAEhC;AAEA,SAASI,qBAAqBA,CAC5BxB,MAAoB,EACpByB,kBAA2B,EAC3BC,aAA6B,EACrB;EACR,IAAMC,eAAe,GAAGF,kBAAkB,GACtC,GAAG,GACHG,kBAAU,CAACF,aAAa,CAAC,CAACG,QAAQ;EAEtC,OAAO7B,MAAM,CAAC8B,SAAS,KAAK3B,SAAS,GAEjCH,MAAM,CAAC8B,SAAS,GAAI,IAAI,GACxBH,eAAe;AACrB;AAEA,SAASI,qBAAqBA,CAAC/B,MAAoB,EAAqB;EAEtE,OAAOA,MAAM,CAACgC,SAAS,KAAK7B,SAAS,GAAGH,MAAM,CAACgC,SAAS,GAAI,IAAI;AAClE;AAEA,SAASC,qBAAqBA,CAACjC,MAAoB,EAAE;EACnD,OAAO,CAAC,CAACA,MAAM,CAACkC,QAAQ;AAC1B;AAEO,SAASnD,yBAAyBA,CAACoD,KAAiB,EAAE;EAC3D,IAAI,CAACA,KAAK,EAAE;IACV;EACF;EAEA,IAAI,OAAOA,KAAK,CAACC,SAAS,KAAK,QAAQ,EAAE;IACvC,MAAM,IAAIC,KAAK,CAAC,yDAAyD,CAAC;EAC5E;EAEA,IAAI,CAACC,KAAK,CAACC,OAAO,CAACJ,KAAK,CAAC,EAAE;IACzB,OAAOA,KAAK,CAACC,SAAS;EACxB;EAGA,KAAK,IAAII,CAAC,GAAGL,KAAK,CAACzB,MAAM,GAAG,CAAC,EAAE8B,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,EAAE;IAC1C,IAAIL,KAAK,CAACK,CAAC,CAAC,CAACJ,SAAS,EAAE;MACtB,OAAOD,KAAK,CAACK,CAAC,CAAC,CAACJ,SAAS;IAC3B;EACF;AACF;AAEO,SAASpD,kBAAkBA,CAChC0C,aAAqB,EACrBe,aAAkC,EAClCzC,MAAoB,EACpB0C,oBAAoC,EACnB;EACjB,OAAO;IACLhB,aAAa,EAAEA,aAAa;IAC5Be,aAAa,EAAEA,aAAa;IAC5BZ,QAAQ,EAAEL,qBAAqB,CAC7BxB,MAAM,EACNyC,aAAa,KAAKE,iCAAmB,CAACC,MAAM,EAC5CF,oBAAoB,CACrB;IACDzB,KAAK,EAAEH,kBAAkB,CAACd,MAAM,CAAC;IACjC6C,MAAM,EAAE9C,mBAAmB,CAACC,MAAM,CAAC;IACnC8C,QAAQ,EAAEf,qBAAqB,CAAC/B,MAAM,CAAC;IACvCkC,QAAQ,EAAED,qBAAqB,CAACjC,MAAM;EACxC,CAAC;AACH;AAEO,SAASZ,kBAAkBA,CAAC2D,OAAoB,EAAE9B,KAAa,EAAE;EACtE,IAAIA,KAAK,KAAK,CAAC,EAAE;IACf,IAAA+B,4BAAc,EACZ;MAAEC,UAAU,EAAE;IAAU,CAAC,EACzB;MAAEC,UAAU,EAAEH;IAAiC,CAAC,CACjD;EACH,CAAC,MAAM;IACLI,UAAU,CAAC,YAAM;MACf,IAAAH,4BAAc,EACZ;QAAEC,UAAU,EAAE;MAAU,CAAC,EACzB;QAAEC,UAAU,EAAEH;MAAiC,CAAC,CACjD;IACH,CAAC,EAAE9B,KAAK,GAAG,IAAI,CAAC;EAClB;AACF;AAEO,SAAS5B,mBAAmBA,CACjC0D,OAAoB,EACpBK,eAAgC,EAChCC,iBAAgD,EAChD;EACA,IAAQ3B,aAAa,GAA8B0B,eAAe,CAA1D1B,aAAa;IAAEG,QAAQ,GAAoBuB,eAAe,CAA3CvB,QAAQ;IAAEZ,KAAK,GAAamC,eAAe,CAAjCnC,KAAK;IAAE4B,MAAA,GAAWO,eAAe,CAA1BP,MAAA;EAExCE,OAAO,CAACZ,KAAK,CAACT,aAAa,GAAGA,aAAa;EAC3CqB,OAAO,CAACZ,KAAK,CAACmB,iBAAiB,GAAI,GAAEzB,QAAS,GAAE;EAChDkB,OAAO,CAACZ,KAAK,CAACoB,cAAc,GAAI,GAAEtC,KAAM,GAAE;EAC1C8B,OAAO,CAACZ,KAAK,CAACqB,uBAAuB,GAAGX,MAAM;EAE9CE,OAAO,CAACU,cAAc,GAAG,YAAM;IAAA,IAAAC,qBAAA;IAC7B,CAAAA,qBAAA,GAAAN,eAAe,CAACN,QAAQ,cAAAY,qBAAA,uBAAxBA,qBAAA,CAAAC,IAAA,CAAAP,eAAe,EAAY,IAAI,CAAC;IAChCL,OAAO,CAACa,mBAAmB,CAAC,iBAAiB,EAAEC,sBAAsB,CAAC;EACxE,CAAC;EAED,IAAMA,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAA,EAAS;IAAA,IAAAC,sBAAA;IACnC,CAAAA,sBAAA,GAAAV,eAAe,CAACN,QAAQ,cAAAgB,sBAAA,uBAAxBA,sBAAA,CAAAH,IAAA,CAAAP,eAAe,EAAY,KAAK,CAAC;IACjCL,OAAO,CAACa,mBAAmB,CAAC,iBAAiB,EAAEC,sBAAsB,CAAC;EACxE,CAAC;EAGDd,OAAO,CAACgB,gBAAgB,GAAG,YAAM;IAC/B,IAAIX,eAAe,CAACX,aAAa,KAAKE,iCAAmB,CAACqB,QAAQ,EAAE;MAClE,IAAAhB,4BAAc,EACZ;QAAEC,UAAU,EAAE;MAAU,CAAC,EACzB;QAAEC,UAAU,EAAEH;MAAiC,CAAC,CACjD;IACH;IAEAA,OAAO,CAACkB,gBAAgB,CAAC,iBAAiB,EAAEJ,sBAAsB,CAAC;IACnEd,OAAO,CAACZ,KAAK,CAACC,SAAS,GAAG,IAAA8B,yCAAwB,EAACb,iBAAiB,CAAC;EACvE,CAAC;EAED,IAAAc,kCAAwB,EAACzC,aAAa,EAAEG,QAAQ,GAAGZ,KAAK,CAAC;AAC3D;AAEO,SAAS9B,sBAAsBA,CACpC4D,OAAoB,EACpBK,eAAgC,EAChCgB,cAA8B,EAC9Bf,iBAA2D,EAC3D;EACA,IAAQ3B,aAAA,GAAkB0B,eAAe,CAAjC1B,aAAA;EAER,IAAIe,aAAa;EAEjB,QAAQf,aAAa;IACnB,KAAK,kBAAkB;MACrBe,aAAa,GAAG4B,sBAAc,CAACC,MAAM;MACrC;IACF,KAAK,qBAAqB;MACxB7B,aAAa,GAAG4B,sBAAc,CAACE,SAAS;MACxC;IACF,KAAK,kBAAkB;MACrB9B,aAAa,GAAG4B,sBAAc,CAACG,MAAM;MACrC;IACF;MACE/B,aAAa,GAAG4B,sBAAc,CAACC,MAAM;MACrC;EAAM;EAGVlB,eAAe,CAAC1B,aAAa,GAAG,IAAA+C,oCAAmB,EACjDhC,aAAa,EACb2B,cAAc,EACdf,iBAAiB,CAClB;EAED,IAAMqB,aAAa,GAAGrB,iBAAiB,GACnCsB,eAAe,CAACtB,iBAAiB,CAAC,GAClC,EAAE;EAINqB,aAAa,CAACE,IAAI,CAACR,cAAc,CAAC;EAClCrB,OAAO,CAACZ,KAAK,CAACC,SAAS,GAAG,IAAA8B,yCAAwB,EAACQ,aAAa,CAAC;EAEjErF,mBAAmB,CAAC0D,OAAO,EAAEK,eAAe,EAAEC,iBAAiB,CAAC;AAClE;AAEO,SAASnE,sBAAsBA,CACpC6D,OAAoB,EACpBK,eAAgC,EAChC;EACA,IAAMyB,MAAM,GAAG9B,OAAO,CAAC+B,YAAY;EACnC,IAAMC,KAAK,GAAGhC,OAAO,CAACiC,SAAS,EAAiB;EAEhDjC,OAAO,CAACZ,KAAK,CAACT,aAAa,GAAG,EAAE;EAChCqB,OAAO,CAACZ,KAAK,CAACc,UAAU,GAAG,QAAQ;EAOnC,OAAOF,OAAO,CAACkC,UAAU,EAAE;IACzBF,KAAK,CAACG,WAAW,CAACnC,OAAO,CAACkC,UAAU,CAAC;EACvC;EAEA5F,mBAAmB,CAAC0F,KAAK,EAAE3B,eAAe,CAAC;EAC3CyB,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEK,WAAW,CAACH,KAAK,CAAC;EAI1BA,KAAK,CAAC5C,KAAK,CAACgD,QAAQ,GAAG,UAAU;EACjCJ,KAAK,CAAC5C,KAAK,CAACiD,GAAG,GAAI,GAAErC,OAAO,CAACsC,SAAU,IAAG;EAC1CN,KAAK,CAAC5C,KAAK,CAACmD,IAAI,GAAI,GAAEvC,OAAO,CAACwC,UAAW,IAAG;EAC5CR,KAAK,CAAC5C,KAAK,CAACqD,MAAM,GAAG,KAAK;EAE1B,IAAMC,sBAAsB,GAAGV,KAAK,CAACtB,cAAc;EAEnDsB,KAAK,CAACtB,cAAc,GAAG,UAAUiC,KAAqB,EAAE;IACtD,IAAIb,MAAM,aAANA,MAAM,eAANA,MAAM,CAAEc,QAAQ,CAACZ,KAAK,CAAC,EAAE;MAC3BF,MAAM,CAACe,WAAW,CAACb,KAAK,CAAC;IAC3B;IAGAU,sBAAsB,aAAtBA,sBAAsB,uBAAtBA,sBAAsB,CAAE9B,IAAI,CAAC,IAAI,EAAE+B,KAAK,CAAC;EAC3C,CAAC;AACH"},"metadata":{},"sourceType":"script","externalDependencies":[]}